<ng-template #otherAddress>
    <lnd-form-field
        [id]="'checkbox-in-subtext'"
        [label]="isIndividual ? 'Mám jinou korespondenční adresu' : 'Mám jinou fakturační adresu'"
        [type]="'CHECKBOX'"
        [formControl]="form.controls.onlyAddress1">
    </lnd-form-field>
</ng-template>
<!-- Example custom lael template -->
<ng-template
    #templateLabel
    let-item="item"
    let-index="index">
    {{ item.street }}&nbsp;{{ item.orientationNumber }}<ng-container *ngIf="item && item.orientationNumber && item.descriptiveNumber">/</ng-container>{{ item.descriptiveNumber }},
    {{ item.city }}, {{ item.postCode }}
</ng-template>
<!-- Example searched items template -->
<ng-template
    #templateItem
    let-item="item"
    let-index="index">
    {{ item.street }}&nbsp;{{ item.orientationNumber }}<ng-container *ngIf="item && item.orientationNumber && item.descriptiveNumber">/</ng-container>{{ item.descriptiveNumber }}<br>
    {{ item.city }}&nbsp;{{ item.postCode }}
</ng-template>

<div class="row mb-5">
    <div class="col-12 text-center">
        {{isIndividual ? 'Osobní údaje' : 'Firemní údaje'}}
    </div>
</div>
<form
    [formGroup]="form"
    (keydown)="resetCustomFieldError()"
    (change)="resetCustomFieldError()"
    autocomplete="off"
    class="form-container">
    <lnd-form-field
        [error]="formError.name || form.controls.name.errors"
        [formControl]="form.controls.name"
        [id]="'name'"
        [label]="isIndividual ? 'Jméno a příjmení' : 'Název společnosti'"
        [success]="form.controls.name.valid && (form.controls.name.touched || formError.name)"
        [touched]="form.controls.name.touched || formError.name"
        [validationMessages]="isIndividual ? formFields.validationMessages.namePerson : formFields.validationMessages.nameCompany"
    ></lnd-form-field>
    <lnd-datepicker
        *ngIf="form.controls.birthDate.status !== 'DISABLED'"
        [datepickerName]="'birthDate'"
        [error]="formError.birthDate || form.controls.birthDate.errors"
        id="datepicker-1"
        label="Datum narození"
        [parentForm]="form"
        [placeholder]="'dd.mm.rrrr'"
        [maxDate]="maxDate"
        [minDate]="minDate"
        [success]="form.controls.birthDate.valid && (form.controls.birthDate.touched || formError.birthDate)"
        [touched]="form.controls.birthDate.touched || formError.birthDate"
        [validationMessages]="formFields.validationMessages.birthDate"
    >
    </lnd-datepicker>
    <pxe-field-wrapper
            *ngIf="form.controls.signatoryName.status !== 'DISABLED' && form.controls.signatorySurname.status !== 'DISABLED'"
            label="Jméno a příjmení podepisující osoby"
            labelFor="signatoryName"
            [error]="((form.controls.signatoryName.touched || formError.signatoryName) && (formError.signatoryName || form.controls.signatoryName.errors)) ||
                     ((form.controls.signatorySurname.touched || formError.signatorySurname) && (formError.signatorySurname || form.controls.signatorySurname.errors))"
            [validationMessages]="((form.controls.signatoryName.touched || formError.signatoryName) && (formError.signatoryName || form.controls.signatoryName.errors) && formFields.validationMessages.signatoryName) ||
                                  ((form.controls.signatorySurname.touched || formError.signatorySurname) && (formError.signatorySurname || form.controls.signatorySurname.errors) && formFields.validationMessages.signatorySurname)">
        <div class="row no-gutters">
            <div class="col-6 pr-1">
                <lnd-form-field
                    *ngIf="form.controls.signatoryName.status !== 'DISABLED'"
                    [error]="formError.signatoryName || form.controls.signatoryName.errors"
                    [formControl]="form.controls.signatoryName"
                    [id]="'signatoryName'"
                    label="Jméno podepisující osoby"
                    [showErrorMessage]="false"
                    [success]="form.controls.signatoryName.valid && (form.controls.signatoryName.touched || formError.signatoryName)"
                    [touched]="form.controls.signatoryName.touched || formError.signatoryName"
                    [validationMessages]="formFields.validationMessages.signatoryName"
                ></lnd-form-field>
            </div>
            <div class="col-6 pl-1">
                <lnd-form-field
                    *ngIf="form.controls.signatorySurname.status !== 'DISABLED'"
                    [error]="formError.signatorySurname || form.controls.signatorySurname.errors"
                    [formControl]="form.controls.signatorySurname"
                    [id]="'signatorySurname'"
                    label="Příjmení podepisující osoby"
                    [showErrorMessage]="false"
                    [success]="form.controls.signatorySurname.valid && (form.controls.signatorySurname.touched || formError.signatorySurname)"
                    [touched]="form.controls.signatorySurname.touched || formError.signatorySurname"
                    [validationMessages]="formFields.validationMessages.signatorySurname"
                ></lnd-form-field>
            </div>
        </div>
    </pxe-field-wrapper>
    <lnd-form-field
        *ngIf="form.controls.signatoryPosition.status !== 'DISABLED'"
        [error]="formError.signatoryPosition || form.controls.signatoryPosition.errors"
        [formControl]="form.controls.signatoryPosition"
        [id]="'position'"
        label="Funkce podepisující osoby ve společnosti"
        [success]="form.controls.signatoryPosition.valid && (form.controls.signatoryPosition.touched || formError.signatoryPosition)"
        [touched]="form.controls.signatoryPosition.touched || formError.signatoryPosition"
        [validationMessages]="formFields.validationMessages.signatoryPosition"
    ></lnd-form-field>
    <lnd-form-field
        *ngIf="form.controls.ico.status !== 'DISABLED'"
        [error]="formError.ico || form.controls.ico.errors"
        [formControl]="form.controls.ico"
        [id]="'ico'"
        label="IČ"
        [success]="form.controls.ico.valid && (form.controls.ico.touched || formError.ico)"
        [touched]="form.controls.ico.touched || formError.ico"
        [validationMessages]="formFields.validationMessages.ico"
    ></lnd-form-field>
    <lnd-form-field
        *ngIf="form.controls.dic.status !== 'DISABLED'"
        [error]="formError.dic || form.controls.dic.errors"
        [formControl]="form.controls.dic"
        [id]="'dic'"
        label="DIČ (nepovinné)"
        [success]="form.controls.dic.valid && (form.controls.dic.touched || formError.dic)"
        [touched]="form.controls.dic.touched || formError.dic"
        [validationMessages]="formFields.validationMessages.dic"
    ></lnd-form-field>
    <pxe-address-whisperer
        [error]="formError.address1 || form.controls.address1.errors"
        [label]="isIndividual ? 'Trvalá adresa' : 'Sídlo firmy'"
        [parentForm]="form"
        [success]="form.controls.address1.valid && (form.controls.address1.touched || formError.address1)"
        [subtextTemplate]="otherAddress"
        [templateItem]="templateItem"
        [templateLabel]="templateLabel"
        [touched]="form.controls.address1.touched || formError.address1"
        [validationMessages]="isIndividual ? formFields.validationMessages.address1Person : formFields.validationMessages.address1Company"
        [whispererName]="'address1'">
    </pxe-address-whisperer>
    <pxe-address-whisperer
        [disabled]="!getFieldValue('onlyAddress1')"
        [error]="formError.address2 || form.controls.address2.errors"
        [label]="isIndividual ? 'Korespondeční adresa' : 'Fakturační adresa'"
        [parentForm]="form"
        [success]="form.controls.address2.valid && (form.controls.address2.touched || formError.address2)"
        [templateItem]="templateItem"
        [templateLabel]="templateLabel"
        [touched]="form.controls.address2.touched || formError.address2"
        [validationMessages]="isIndividual ? formFields.validationMessages.address2Person : formFields.validationMessages.address2Company"
        [whispererName]="'address2'">
    </pxe-address-whisperer>
    <pxe-field-wrapper
        label="Bankovní účet"
        labelFor="bankAccountNumber"
        subtext="Číslo bankovního účtu s předčíslím uveďte ve tvaru XX-XXXXXXXXXX"
        [error]="((form.controls.bankAccountNumber.touched || formError.bankAccountNumber) && (formError.bankAccountNumber || form.controls.bankAccountNumber.errors)) ||
                 ((form.controls.bankCode.touched || formError.bankCode) && (formError.bankCode || form.controls.bankCode.errors))"
        [validationMessages]="((form.controls.bankAccountNumber.touched || formError.bankAccountNumber) && (formError.bankAccountNumber || form.controls.bankAccountNumber.errors) && formFields.validationMessages.bankAccountNumber) ||
                              ((form.controls.bankCode.touched || formError.bankCode) && (formError.bankCode || form.controls.bankCode.errors) && formFields.validationMessages.bankCode)">
        <div class="row no-gutters">
            <div class="col-8 pr-1">
                <lnd-form-field
                        [error]="formError.bankAccountNumber || form.controls.bankAccountNumber.errors"
                        [formControl]="form.controls.bankAccountNumber"
                        [id]="'bankAccountNumber'"
                        label="Bankovní účet"
                        subtext="Číslo bankovního účtu s předčíslím uveďte ve tvaru XX-XXXXXXXXXX"
                        [showErrorMessage]="false"
                        [success]="form.controls.bankAccountNumber.valid && (form.controls.bankAccountNumber.touched || formError.bankAccountNumber)"
                        [touched]="form.controls.bankAccountNumber.touched || formError.bankAccountNumber"
                        [validationMessages]="formFields.validationMessages.bankAccountNumber"
                ></lnd-form-field>
            </div>
            <div class="col-4 pl-1">
                <lnd-form-field
                        [error]="formError.bankCode || form.controls.bankCode.errors"
                        [formControl]="form.controls.bankCode"
                        [id]="'bankCode'"
                        label=""
                        [showErrorMessage]="false"
                        [success]="form.controls.bankCode.valid && (form.controls.bankCode.touched || formError.bankCode)"
                        [touched]="form.controls.bankCode.touched || formError.bankCode"
                        [validationMessages]="formFields.validationMessages.bankCode"
                ></lnd-form-field>
            </div>
        </div>
    </pxe-field-wrapper>
    <pxe-field-wrapper
        label="Telefonní číslo"
        labelFor="phonePrefix"
        [error]="((form.controls.phonePrefix.touched || formError.phonePrefix) && (formError.phonePrefix || form.controls.phonePrefix.errors)) ||
                 ((form.controls.phone.touched || formError.phone) && (formError.phone || form.controls.phone.errors))"
        [validationMessages]="((form.controls.phonePrefix.touched || formError.phonePrefix) && (formError.phonePrefix || form.controls.phonePrefix.errors) && formFields.validationMessages.phonePrefix) ||
                              ((form.controls.phone.touched || formError.phone) && (formError.phone || form.controls.phone.errors) && formFields.validationMessages.phone)">
        <div class="row no-gutters">
            <div class="col-4 pr-1">
                <lnd-form-field
                    [disabledField]="true"
                    [error]="formError.phonePrefix || form.controls.phonePrefix.errors"
                    [formControl]="form.controls.phonePrefix"
                    [id]="'phonePrefix'"
                    label="Telefonní číslo"
                    [showErrorMessage]="false"
                    [success]="form.controls.phonePrefix.valid && (form.controls.phonePrefix.touched || formError.phonePrefix)"
                    [touched]="form.controls.phonePrefix.touched || formError.phonePrefix"
                    [validationMessages]="formFields.validationMessages.phonePrefix"
                ></lnd-form-field>
            </div>
            <div class="col-8 pl-1">
                <lnd-form-field
                    [error]="formError.phone || form.controls.phone.errors"
                    [formControl]="form.controls.phone"
                    [id]="'phone'"
                    label=""
                    [showErrorMessage]="false"
                    [success]="form.controls.phone.valid && (form.controls.phone.touched || formError.phone)"
                    [touched]="form.controls.phone.touched || formError.phone"
                    [validationMessages]="formFields.validationMessages.phone"
                ></lnd-form-field>
            </div>
        </div>
    </pxe-field-wrapper>
    <lnd-form-field
        [error]="formError.email || form.controls.email.errors"
        [formControl]="form.controls.email"
        [id]="'email'"
        label="E-mail"
        [success]="form.controls.email.valid && (form.controls.email.touched || formError.email)"
        [touched]="form.controls.email.touched || formError.email"
        [validationMessages]="formFields.validationMessages.email"
    ></lnd-form-field>
    <lnd-select
        *ngIf="form.controls.depositPaymentTypeId.status !== 'DISABLED'"
        [error]="formError.depositPaymentTypeId || form.controls.depositPaymentTypeId.errors"
        label="Způsob placení záloh"
        [options]="depositPaymentTypeId"
        [parentForm]="form"
        [selectName]="'depositPaymentTypeId'"
        [success]="form.controls.depositPaymentTypeId.valid && (form.controls.depositPaymentTypeId.touched || formError.depositPaymentTypeId)"
        [touched]="form.controls.depositPaymentTypeId.touched || formError.depositPaymentTypeId"
        [validationMessages]="formFields.validationMessages.depositPaymentTypeId">
    </lnd-select>
    <lnd-form-field
        *ngIf="form.controls.deposit.status !== 'DISABLED'"
        [error]="formError.deposit || form.controls.deposit.errors"
        [formControl]="form.controls.deposit"
        [id]="'deposit'"
        label="Výše záloh"
        [success]="form.controls.deposit.valid && (form.controls.deposit.touched || formError.deposit)"
        [touched]="form.controls.deposit.touched || formError.deposit"
        [validationMessages]="formFields.validationMessages.deposit"
    ></lnd-form-field>
    <div class="text-center">
        <lnd-button
            type="primary"
            (action)="submitForm()"
            [isDisabled]="formLoading"
            label="Pokračovat">
        </lnd-button>
    </div>
</form>
