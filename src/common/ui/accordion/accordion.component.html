<ng-template #defaultTemplate let-data>
    <p>{{ data }}</p>
</ng-template>

<div class="accordion" [ngClass]="{ 'accordion--more-open': isMoreOpen || showAll }">
    <div class="accordion__header" *ngIf="title">
        <h3 class="accordion__header-title">{{ title }}</h3>
    </div>
    <div class="accordion__body">
        <div class="accordion__item"
             *ngFor="let item of accordionItems"
             [ngClass]="{ 'accordion__item--active': item.isActive }">
            <div class="accordion__toggle"
                 (click)="item.isActive = !item.isActive">
                <span [innerHTML]="item.label"></span>
                <span class="
                                icon
                                icon--arrow-minimal-down
                                accordion__toggle-icon"></span>
            </div>
            <div class="accordion__content">
                <ng-container *ngTemplateOutlet="accordionContentTemplate || defaultTemplate; context: { $implicit: item.data }">
                </ng-container>
            </div>
        </div>
    </div>
    <div class="accordion__footer"
        *ngIf="(accordionItems.length > moreOpenItemsCount) && !showAll"
        >
        <span (click)="isMoreOpen = !isMoreOpen"
           *ngIf="accordionItems.length > moreOpenItemsCount"
           class="accordion__footer-link"
           >
            {{ isMoreOpen ? footerLessLabel : footerMoreLabel }}
            <span class="
                    icon
                    icon--arrow-minimal-down
                    accordion__footer-icon"></span>
        </span>
    </div>
</div>
