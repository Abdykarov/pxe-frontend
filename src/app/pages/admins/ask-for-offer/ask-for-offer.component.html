<ng-template #actionColumnFill let-row="row">
    <div *ngIf="row.status !== ContractUploadStatus.PROCESSED"
        class="d-flex justify-content-end">
        <lnd-button
            customClass="mr-3"
            (action)="routerToCreateUser(row.id)"
            [label]="row.status === ContractUploadStatus.NEW ? 'Vyplnit' : 'Dokončit'"
            type="primary">
        </lnd-button>
        <lnd-button
            type="icon"
            icon="icon--delete"
            variant="icon"
            title="Odstranit"
            (action)="delete(row.id)"
        ></lnd-button>
    </div>
</ng-template>

<ng-template #actionColumnPDF let-row="row">
    <ng-container *ngIf="row.files && row.files.length === 1">
        <a (click)="downloadAskForOffer(row.files[0].id)">{{row.files[0].fileName}}</a>
    </ng-container>
    <ng-container *ngIf="row.files && row.files.length !== 1">
        <a (click)="downloadAskForOffersZipArchive(row?.id)">ZIP</a>
    </ng-container>
</ng-template>

<ng-template #columnCreatedAt let-row="row">
    {{row.createdAt | date:'d.&nbsp;M.&nbsp;y'}}
</ng-template>

<pxe-layout-container [pageTitle]="titleMapping[(routerParamsSubject$ | async).type]">
    <div class="row">
        <div class="col-12">
            <lnd-alert
                *ngIf="globalError.length"
                type="danger">
                <ng-container *ngFor="let error of globalError">
                    {{ error }}<br>
                </ng-container>
            </lnd-alert>
        </div>
<!--        <div class="col-12">NO NEED-->
<!--            <lnd-placeloader [loading]="loading"></lnd-placeloader>-->
<!--        </div>-->
        <div *ngIf="paginatedAskForOffer"
             class="col-12">
            <ng-container *ngIf="paginatedAskForOffer.page.length > 0">
                <lnd-table
                    [cols]="tableConfig"
                    [rows]="paginatedAskForOffer.page"
                    [showHead]="true"
                    [tableWrapperClass]="['table-wrapper--advanced']"
                    [tableClass]="['table--advanced', 'mb-0','table-layout-fixed']"
                    [columnTemplates]="{
                        actionColumnFill: actionColumnFill,
                        actionColumnPDF: actionColumnPDF,
                        columnCreatedAt: columnCreatedAt
                    }">
                    ></lnd-table>
                <div class="float-right">
                    <lnd-pagination
                        [showBoundaryLinks]="paginationConfig.showBoundaryLinks"
                        [itemsPerPage]="paginationConfig.itemsPerPage"
                        [maxSize]="paginationConfig.maxSize"
                        (pageChanged)="pageChanged($event)"
                        [totalItems]="paginatedAskForOffer.totalRecords"
                        [firstText]="paginationConfig.firstText"
                        [previousText]="paginationConfig.previousText"
                        [nextText]="paginationConfig.nextText"
                        [lastText]="paginationConfig.lastText"
                    ></lnd-pagination>
                </div>
            </ng-container>
            <ng-container *ngIf="paginatedAskForOffer.page.length === 0">
                <lnd-info-banner
                    [bannerType]="BannerTypeImages.LOADING"
                    [bannerTitle]="'Nejsou zde žádné faktury.'"
                    [showButton]="false"
                ></lnd-info-banner>
            </ng-container>

        </div>
    </div>
</pxe-layout-container>
