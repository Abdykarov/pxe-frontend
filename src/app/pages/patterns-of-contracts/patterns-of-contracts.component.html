<ng-template #columnTemplateDownload let-row="row">
    <a (click)="downloadPdf(row.sourceUrl, row.downloadName)">Stáhnout</a>
</ng-template>

<ng-template #columnTemplateDownloadText let-row="row">
    Platná v období: {{row.dateFrom | date:'d.&nbsp;M.&nbsp;y'}} - {{row.dateTo | date:'d.&nbsp;M.&nbsp;y'}}
</ng-template>

<div class="container-fluid">
    <div class="container-content">
        <pxe-layout-container pageTitle="Vzory smluv o dodávce" [breadcrumbItemsSimple]="breadcrumbItemsSimple">
            <div class="row">
                <div class="col-12">
                    <ul class="text-center link-list">
                        <li class="link-list__item">
                            <a class="link-list__link"
                                href="#"
                                [class.link-list__link--active]="subjectType == SUBJECT_TYPE.INDIVIDUAL"
                                (click)="routeToSubjectType($event, SUBJECT_TYPE.INDIVIDUAL)">
                                Domácnost
                            </a>
                        </li>
                        <li class="link-list__item">
                            <a class="link-list__link"
                                href="#"
                                [class.link-list__link--active]="subjectType == SUBJECT_TYPE.BUSINESSMAN"
                                (click)="routeToSubjectType($event, SUBJECT_TYPE.BUSINESSMAN)">
                                Firma
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="col-12 col-xl-8 offset-xl-2 col-xl-8 offset-xl-2">
                    <lnd-banner-ui
                        *ngFor="let setting of pdfFutureContracts"
                        icon="icon--info"
                        [data]="{
                            text: datePipe.transform(setting[subjectType][commodityType].dateFrom) + ' začíná platnost nové smlouvy o sdružených službách dodávky pro ' +
                                (commodityType === COMMODITY_TYPE.POWER ? 'elektřiny' : 'plynu') + ' pro ' + (subjectType === SUBJECT_TYPE.INDIVIDUAL ? 'domácnost' : 'firmu')
                        }"
                        (customBannerAction)="downloadPdf(setting[subjectType][commodityType].sourceUrl, setting[subjectType][commodityType].downloadName)"
                        buttonLabel="Stáhnout"
                    ></lnd-banner-ui>
                </div>
                <div class="col-12 col-xl-8 offset-xl-2 col-xl-8 offset-xl-2">
                    <h5 class="mb-2">Aktuální smlouvy</h5>
                </div>
                <div class="col-12 col-xl-8 offset-xl-2 col-xl-8 offset-xl-2 bg-white font-size-12">
                    <ul class="link-list">
                        <li class="link-list__item">
                            <a class="link-list__link"
                               href="#"
                               [class.link-list__link--active]="commodityType == COMMODITY_TYPE.POWER"
                               (click)="routeToCommodityType($event, COMMODITY_TYPE.POWER)">
                                Elektřina
                            </a>
                        </li>
                        <li class="link-list__item">
                            <a class="link-list__link"
                               href="#"
                               [class.link-list__link--active]="commodityType == COMMODITY_TYPE.GAS"
                               (click)="routeToCommodityType($event, COMMODITY_TYPE.GAS)">
                                Plyn
                            </a>
                        </li>
                    </ul>
                    <h3 class="mx-5">Aktuální smlouva o dodávce
                        {{commodityType === COMMODITY_TYPE.POWER ? 'elektřiny' : 'plynu'}} pro {{subjectType === SUBJECT_TYPE.INDIVIDUAL ? 'domácnost' : 'firmu'}}
                    </h3>
                    <p class="mx-5">
                        Níže naleznete dokumenty potřebné k uzavření dodávky {{commodityType === COMMODITY_TYPE.POWER ? 'energií' : 'plynu'}} pro budoucí období.
                        Návrh smlouvy o sdružených službách dodávky {{commodityType === COMMODITY_TYPE.POWER ? 'energií' : 'plynu'}}, obsahuje také všeobecné
                        podmínky dodávky a plnou moc pro dodavatele.
                    </p>
                </div>
                <div class="col-12 col-xl-8 offset-xl-2 col-xl-8 offset-xl-2 font-size-12" style="background-color: #e9ecef">
                    <div class="pdf-holder pdf-holder--large px-3 px-xl-0">
                        <pxe-pdf-viewer
                            #pxePdfViewer
                            [customPdfCss]="true"
                            [openFile]="false"
                            [viewBookmark]="false"
                            zoom="page-width">
                        ></pxe-pdf-viewer>
                    </div>
                    <ng-container *ngIf="pdfActiveContracts[this.subjectType][this.commodityType] as pdfSetting">
                        <lnd-button
                            label="Stáhnout"
                            type="primary"
                            (action)="downloadPdf(pdfSetting.sourceUrl, pdfSetting.downloadName)">
                        </lnd-button>
                    </ng-container>
                    <h5>Archiv smluv o dodávce elektřiny společnosti Power Central Europe, a.s. pro domácnosti</h5>
                    <lnd-table
                        [cols]="historyTableCols"
                        [rows]="pdfOldContracts"
                        [tableWrapperClass]="['table-wrapper--advanced']"
                        [columnTemplates]="{
                            columnTemplateDownload: columnTemplateDownload,
                            columnTemplateDownloadText: columnTemplateDownloadText
                        }">
                    ></lnd-table>
                </div>
            </div>
        </pxe-layout-container>
    </div>
</div>
