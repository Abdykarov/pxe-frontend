<pxe-layout-container pageTitle="Dashboard">
    <lnd-placeloader [loading]="!globalError.length && loadingData"></lnd-placeloader>
    <div class="row">
        <div class="col-12 col-md-12">
            <lnd-alert
                *ngIf="globalError.length"
                type="danger">
                <ng-container *ngFor="let error of globalError">
                    {{ error }}<br>
                </ng-container>
            </lnd-alert>
        </div>
    </div>
    <lnd-info-banner
        *ngIf="supplyPointStatistic && supplyPointStatistic.gasCount === 0 && supplyPointStatistic.powerCount === 0"
        [bannerTitle]="'Zatím nemáte uložené žádné odběrné místo'"
        [bannerDescription]="'Zadejte odběrné místo a my vám hned dáme nabídky'"
        [buttonLabel]="'Zadat odběrné místo'"
        (buttonAction)="createSupplyPointAction()"
    ></lnd-info-banner>
    <lnd-banner-ui
        *ngIf="supplyPointStatistic && supplyPointStatistic.notConcludedCount > 0"
        [buttonLabel]="supplyPointStatistic.notConcludedCount === 1 ? 'Dokončit žádost' : 'Přehled žádostí'"
        [data]="{
            text: supplyPointStatistic.notConcludedCount === 1 ? 'Máte rozdělanou žádost.' : 'Máte rozděláno více žádostí.'
        }"
        (customBannerAction)="completeRequestAction()"
    ></lnd-banner-ui>
    <div class="row mt-5" *ngIf="supplyPointStatistic && !loadingData">
        <div class="col-md-6">
            <h2>Odběrná místa</h2>
            <pxe-supply-points-summary
                    [powerPlacesCount]="supplyPointStatistic.powerCount"
                    [powerPlacesConsumptionSum]="supplyPointStatistic.gasAnnualConsumptionSum"
                [gasPlacesCount]="supplyPointStatistic.gasCount"
                    [gasPlacesConsumptionSum]="supplyPointStatistic.powerAnnualConsumptionSum"
                [supplyPointsEndingCount]="supplyPointStatistic.showDeliveryCount"
                [supplyPointsEndingData]="supplyPointStatistic.showDeliveryItems"
                (newSupplierAction)="createSupplyPointAction()"
                (supplyPointsListAction)="routerToListOfSupplyPointsAction()">
            </pxe-supply-points-summary>
        </div>
        <div class="col-md-6">
            <h2>Novinky</h2>
            <pxe-news-container></pxe-news-container>
        </div>
    </div>
</pxe-layout-container>

