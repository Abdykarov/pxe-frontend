<pxe-layout-container pageTitle="Uzavřené smlouvy">
    <lnd-alert
        *ngIf="globalError.length"
        type="danger">
        <ng-container *ngFor="let error of globalError">
            {{ error }}<br>
        </ng-container>
    </lnd-alert>
    <ul class="text-center link-list">
        <li class="link-list__item">
            <a class="link-list__link"
               routerLinkActive="link-list__link--active"
               [routerLinkActiveOptions]="{exact: true}"
               [routerLink]="[routePower]">Elektřina</a>
        </li>
        <li class="link-list__item">
            <a class="link-list__link"
               routerLinkActive="link-list__link--active"
               [routerLinkActiveOptions]="{exact: true}"
               [routerLink]="[routeGas]">Plyn</a>
        </li>
    </ul>
    <lnd-placeloader [loading]="formLoading && !globalError.length"></lnd-placeloader>
    <ng-template #downloadPdfTemplate let-row="row">
        <div class="icon-box" title="document">
            <span class="icon-box__symbol">
                <span class="icon icon--document"></span>
            </span>
            <span class="icon-box__name ml-1">
                <a (click)="downloadPDF(row.contract.contractId)">Stáhnout PDF</a>
            </span>
        </div>
    </ng-template>
    <div class="row">
        <div class="col-12 col-lg-10 offset-lg-1">
            <ng-container *ngIf="(contractsWithNameAndSupplyPointEan | pathValue:['contractsWithNameAndEan']) &&
                                  contractsWithNameAndSupplyPointEan.contractsWithNameAndEan.length &&
                                  tableCols">
                <lnd-table
                    [cols]="tableCols"
                    [rows]="contractsWithNameAndSupplyPointEan.contractsWithNameAndEan"
                    [showHead]="true"
                    [tableWrapperClass]="['table-wrapper--advanced']"
                    [tableClass]="['table--advanced', 'mb-0']"
                    [columnTemplates]="{
                        downloadPdfTemplate: downloadPdfTemplate
                    }"
                ></lnd-table>
                <div class="float-right">
                    <lnd-pagination
                        [showBoundaryLinks]="showBoundaryLinks"
                        [itemsPerPage]="itemsPerPage"
                        [maxSize]="maxSize"
                        (pageChanged)="pageChanged($event)"
                        [totalItems]="contractsWithNameAndSupplyPointEan.totalRecords"
                        [firstText] = "firstText"
                        [previousText] = "previousText"
                        [nextText] = "nextText"
                        [lastText] = "lastText"
                    ></lnd-pagination>
                </div>
            </ng-container>
            <lnd-info-banner
                *ngIf="(contractsWithNameAndSupplyPointEan | pathValue:['contractsWithNameAndEan']) &&
                        contractsWithNameAndSupplyPointEan.contractsWithNameAndEan.length === 0"
                [bannerDescription]="'Vytvořte nabídku a uvidíte, že zájemců se objeví brzo mnoho.'"
                [bannerTitle]="'Žádný zákazník u vás momentálně nemá zasmluvněnou dodávku ' + commodityType === COMMODITY_TYPE_POWER ? 'elektřiny' : 'plynu' + '.'"
                [bannerType]="bannerType"
                [buttonLabel]="'Vytvořte nabídku'"
                (buttonAction)="redirectToOffer($event)"
            ></lnd-info-banner>
        </div>
    </div>
</pxe-layout-container>
